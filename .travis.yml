# language: erlang
# otp_release:
#   - "21.2"
#   - "22.1.8"
#   - "23.1.2"
#   - "24.3.1"
#   - "25.1.1"

  #- shopt -s expand_aliases
  #- source ~/.bash_profile
  #- alias -p
  #- docker_func

language: ruby
group: stable
#vm:
 # size: 'gpu-medium'


jobs:
  include:
    #  - dist: xenial
    #    arch: arm64
    #  - dist: bionic
    #    arch: arm64
    #  - dist: focal
    #    arch: arm64
    #  - dist: xenial
    #    arch: ppc64le
    #- dist: bionic
    #  arch: ppc64le
    #  - dist: focal
    #    arch: ppc64le
    #  - dist: xenial
    #    arch: s390x
      # - dist: bionic
      #   arch: s390x
    #  - dist: focal
    #    arch: s390x
   # - dist: xenial
   #   arch: amd64
   # - dist: bionic
   #   arch: amd64
  #  # - stage: "Installing addons on linux"
  #     name: "addons xenial"
  #     dist: xenial
  #     addons:
  #       tensorflow: 1.13.1
  #       blender: 3.4.1
  #     script:
  #       - df -h
  #       - blender -v
  #       - echo "it is done"
    - stage: "Installing addons on linux"
      name: "test1"
      dist: focal
      addons:
        tensorflow: 1.13.1
        blender: 3.4.1
      script:
        - ln -sf /var/run/resolved/resolv.conf /etc/resolv.conf
        - sudo systemctl disable systemd-resolved
        - sudo systemctl stop systemd-resolved
        - cat /etc/resolv.conf
       # - pip install --trusted-host pip.cache.travis-ci.com -i http://pip.cache.travis-ci.com/root/pypi/+simple/ tensorflow==1.13.1
        - cat /etc/resolv.conf
    - stage: "Installing addons on linux"
      name: "test2"
      dist: focal
      #addons:
      #  tensorflow: 1.13.1
      #  blender: 3.4.1
      script:
        - ln -sf /var/run/resolved/resolv.conf /etc/resolv.conf
        - sudo systemctl disable systemd-resolved
        - sudo systemctl stop systemd-resolved
        - cat /etc/resolv.conf
        - systemctl is-active systemd-resolved
        #- pip install --trusted-host pip.cache.travis-ci.com -i http://pip.cache.travis-ci.com/root/pypi/+simple/ tensorflow==1.13.1
        - cat /etc/resolv.conf
    - stage: "Installing addons on linux"
      name: "test3"
      dist: xenial
      #addons:
      #  tensorflow: 1.13.1
      #  blender: 3.4.1
      script:
        - cat /etc/resolv.conf
        - systemctl is-active systemd-resolved
        #- pip install --trusted-host pip.cache.travis-ci.com -i http://pip.cache.travis-ci.com/root/pypi/+simple/ tensorflow==1.13.1
        - cat /etc/resolv.conf
    - stage: "Installing addons on linux"
      name: "test4"
      dist: xenial
      #addons:
      #  tensorflow: 1.13.1
      #  blender: 3.4.1
      script:
        - cat /etc/resolv.conf
        - systemctl is-active systemd-resolved
       # - pip install --trusted-host pip.cache.travis-ci.com -i http://pip.cache.travis-ci.com/root/pypi/+simple/ tensorflow==1.13.1
        - cat /etc/resolv.conf
